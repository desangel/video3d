/*!
 * =====================================================
 * video3d v0.1.0 (http://desangel.github.io/video3d/)
 * =====================================================
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({},{},[]),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){a=a||{};var b=a.elementType||"div",c=a.id,d=a.className,e=document.createElement(b);return f(e,"id",c),f(e,"class",d),e}function e(a,b,c){c===!0&&f(a,b,"")}function f(a,b,c){void 0!==c&&a.setAttribute(b,c)}function g(a,b){var c=a.getAttribute("style")||"";for(var d in b){var e=b[d],g=a.getAttribute(e);c+=e+":"+g+";"}return f(a,"style",c),c}function h(a){return a.outerHTML||function(){var b=document.createElement("div");return b.appendChild(a),b.innerHTML||""}()}b.exports={addAttribute:e,attrToStyle:g,createElement:d,elementToStr:h,setAttribute:f}},{}],2:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./video");b.exports={dom:d,video:e}},{"./dom":1,"./video":4}],3:[function(a,b,c){"use strict";var d=a("./dom");function e(a){a=a||{};var b=a.src,c=a.type,e=d.createElement({elementType:"source"});return d.setAttribute(e,"src",b),d.setAttribute(e,"type",c),e}b.exports={createElement:e}},{"./dom":1}],4:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./source");function f(a){a=a||{};var b=a.id,c=a.className,f=a.autoplay,h=a.controls,i=a.height,j=a.loop,k=a.preload,l=a.src,m=a.width,n=a.sources||[],o=d.createElement({id:b,className:c,elementType:"video"});d.setAttribute(o,"width",m),d.setAttribute(o,"height",i),d.setAttribute(o,"src",l),d.addAttribute(o,"autoplay",f),d.addAttribute(o,"controls",h),d.addAttribute(o,"loop",j),d.addAttribute(o,"preload",k);for(var p in n){var q=e.createElement(n[p]);o.appendChild(q)}return null==g(o)?void console.error("video type not supported. please use mp4/webm/ogg."):o}function g(a){return"maybe"===a.canPlayType("video/mp4")?"mp4":"maybe"===a.canPlayType("video/webm")?"webm":"maybe"===a.canPlayType("video/ogg")?"ogg":null}b.exports={createElement:f,checkVideoType:g}},{"./dom":1,"./source":3}],5:[function(a,b,c){(function(c){"use strict";var d=a("./variables"),e=a("./html"),f=a("./player"),g=d.namespace,h={className:{container:g+"container",video:g+"video"}},i=e.video;function j(a){var b=this;b.init(a)}j.prototype={constructor:j,init:function(a){var b=this;a=a||{};var c=a.container,d=a.autoplay||!1,e=a.loop||!1,j=a.videoSources,k=a.callbacks||{},l=i.createElement({className:h.className.video,sources:j});"string"==typeof c?c=document.getElementById(c):null==c&&(c=document.createElement("div"),document.body.appendChild(c)),c.classList.add(h.className.container);var m=new f({namespace:g,container:c,video:l,autoplay:d,loop:e});b.container=c,b.video=l,b.player=m,"function"==typeof k.init&&k.init(b)},play:function(){this.player.control.play()},pause:function(){this.player.control.pause()},stop:function(){this.player.control.stop()},togglePlay:function(){this.player.control.togglePlay()}},b.exports=j,c.video3d=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./html":2,"./player":7,"./variables":14}],6:[function(a,b,c){"use strict";a("./requestFullScreen");var d=a("../html"),e=a("../util/date"),f=d.dom,g="control-",h={className:{container:"control",scroll:g+"scroll",scrollBg:g+"scroll-bg",scrollBg1:g+"scroll-bg1",scrollBg2:g+"scroll-bg2",btnPlay:g+"btn-play",btnVolumn:g+"btn-volume",btnFullScreen:g+"btn-fullscreen",txtTime:g+"txt-time"}};function i(a){this.init(a)}i.prototype={constructor:i,init:function(a){var b=this,c=a.namespace,d=a.container,e=a.video,g=a.renderer,i=a.autoplay,j=a.loop;e.setAttribute("webkit-playsinline",""),e.setAttribute("preload",""),g.keyframe=function(){b.keyframe()};var k=f.createElement({className:c+h.className.container}),l=f.createElement({className:c+h.className.scroll}),m=f.createElement({className:c+h.className.scrollBg}),n=f.createElement({className:c+h.className.scrollBg1}),o=f.createElement({className:c+h.className.scrollBg2}),p=f.createElement({className:c+h.className.btnPlay}),q=f.createElement({className:c+h.className.btnVolumn}),r=f.createElement({className:c+h.className.btnFullScreen}),s=f.createElement({className:c+h.className.txtTime});l.appendChild(m),l.appendChild(n),l.appendChild(o),k.appendChild(l),k.appendChild(p),k.appendChild(s),k.appendChild(r),k.appendChild(q),d.appendChild(k),p.addEventListener("click",t),r.addEventListener("click",u),b.container=d,b.video=e,b.renderer=g,b.scroll=l,b.scrollBg1=n,b.scrollBg2=o,b.btnPlay=p,b.btnVolumn=q,b.btnFullScreen=r,b.txtTime=s,f.addAttribute(e,"loop",j),f.addAttribute(e,"autoplay",i),e.load(),e.addEventListener("canplay",function(){b.play(),g.nextframe(function(){b.pause(),i&&b.play()})});function t(a){var c=a.target||a.srcElement;b.togglePlay(c)}function u(){var a=d.hasAttribute("fullscreen");a?b.cancelFullScreen():b.requestFullScreen()}},keyframe:function(){var a=this,b=a.video,c=a.scrollBg2,d=a.txtTime,f=b.currentTime||0,g=b.duration||1,h=e.durationToStr(1e3*f,"hh:mm:ss","hh"),i=e.durationToStr(1e3*g,"hh:mm:ss","hh");d.innerHTML=h+"/"+i;var j=Math.floor(f/g*1e4)/100;c.style.width=j+"%"},togglePlay:function(){var a=this,b=a.btnPlay,c=b.hasAttribute("pause");c?a.play():a.pause()},play:function(){var a=this,b=a.btnPlay;b.removeAttribute("pause"),a.renderer.start(),a.video.play()},pause:function(){var a=this,b=a.btnPlay;b.setAttribute("pause",""),a.video.pause()},stop:function(){var a=this,b=a.btnPlay;b.setAttribute("pause",""),a.renderer.stop(),a.video.pause()},requestFullScreen:function(){var a=this,b=a.container;b.setAttribute("fullscreen",""),window.requestFullScreen(b)},cancelFullScreen:function(){var a=this,b=a.container;b.removeAttribute("fullscreen"),document.cancelFullScreen()}},b.exports=i},{"../html":2,"../util/date":13,"./requestFullScreen":10}],7:[function(a,b,c){"use strict";var d=a("./support"),e=a("./renderer"),f=a("./control");function g(a){this.init(a)}g.prototype={constructor:g,init:function(a){var b=this,c=a.namespace,g=a.container,h=a.video;if(!d.isSupport())return void d.createMessage({namespace:c,container:g});var i=new e({namespace:c,container:g,video:h});a.renderer=i;var j=new f(a);b.control=j,b.renderer=i}},b.exports=g},{"./control":6,"./renderer":8,"./support":11}],8:[function(a,b,c){"use strict";a("./requestAnimFrame");var d=a("../html"),e=d.dom,f="renderer-",g={className:{container:"renderer",canvas:f+"canvas"}};function h(a){a=a||{};var b=a.namespace,c=a.container||document.body,d=a.video,f=e.createElement({className:b+g.className.container});c.appendChild(f);var h,i,j,k,l,m=new THREE.Vector2(-1,1),n=!1,o,p,q,r,s=0,t=0,u=0,v=0,w=new THREE.Vector3,x,y;l=new THREE.VideoTexture(d),l.minFilter=THREE.LinearFilter,l.format=THREE.RGBFormat,l.generateMipmaps=!1,h=new THREE.Scene;var z=new THREE.SphereGeometry(500,60,40);z.scale(-1,1,1);var A=new THREE.MeshBasicMaterial({map:l}),B=new THREE.Mesh(z,A);h.add(B),j=new THREE.WebGLRenderer,j.setClearColor(1052688),j.setPixelRatio(window.devicePixelRatio),j.setSize(x,y),k=j.domElement,f.appendChild(j.domElement),i=new THREE.PerspectiveCamera(75,x/y,1,2e3),k.addEventListener("mousedown",K,!1),k.addEventListener("mousemove",L,!1),k.addEventListener("mouseup",M,!1),k.addEventListener("touchstart",N,!1),k.addEventListener("touchmove",O,!1),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",P,!1);var C={renderer:j,camera:i},D=this;for(var E in C)D[E]=C[E];D.keyframe=a.keyframe,D.start=G,D.stop=H,D.nextframe=J;var F=!1;function G(){F||(F=!1,T())}function H(){F=!0}var I=0;function J(a){"function"==typeof a&&(I++,a(D))}function K(a){a.preventDefault(),n=!0,o=a.clientX,p=a.clientY,q=s,r=t}function L(a){n===!0&&(s=.1*-(o-a.clientX)+q,t=.1*-(a.clientY-p)+r);var b=a.clientX,c=a.clientY;m.x=(b-k.offsetLeft)/k.offsetWidth*2-1,m.y=(c-k.offsetTop)/k.offsetHeight*2-1}function M(){n=!1}function N(a){1===a.touches.length&&(a.preventDefault(),o=a.touches[0].pageX,p=a.touches[0].pageY,q=s,r=t);var b=a.touches[0].pageX,c=a.touches[0].pageY;m.x=(b-k.offsetLeft)/k.offsetWidth*2-1,m.y=(c-k.offsetTop)/k.offsetHeight*2-1}function O(a){1===a.touches.length&&(a.preventDefault(),s=.1*-(o-a.touches[0].pageX)+q,t=.1*-(a.touches[0].pageY-p)+r)}function P(){var a=Q();x=a.width,y=a.height,R()}function Q(){var a=window.orientation,b,c;return void 0!==a?0===a||180===a?(b=Math.min(window.innerWidth,window.screen.width),c=Math.min(window.innerHeight,window.screen.height)):(b=Math.min(window.innerWidth,window.screen.height),c=Math.min(window.innerHeight,window.screen.width)):(b=window.innerWidth,c=window.innerHeight),b=f.offsetWidth,c=f.offsetHeight,{width:b,height:c}}function R(){i.aspect=x/y,i.updateProjectionMatrix(),j.setSize(x,y)}function S(){var a=Q(),b=a.width,c=a.height;x===b&&y===c||(x=b,y=c,R())}function T(){F||(window.requestAnimFrame(T),U(),I>0&&(J(),I--))}function U(){"function"==typeof D.keyframe&&D.keyframe(D),S(),a(),j.setClearColor(0,0,0,0),j.render(h,i);function a(){var a=300;t=Math.max(-85,Math.min(85,t)),u=THREE.Math.degToRad(t),v=THREE.Math.degToRad(s),w.x=a*Math.cos(u)*Math.sin(v),w.y=a*Math.sin(u),w.z=a*Math.cos(u)*Math.cos(v);var b=w;i.position.copy(b),i.lookAt(b.negate())}}}b.exports=h},{"../html":2,"./requestAnimFrame":9}],9:[function(a,b,c){"use strict";function d(){var a=0,b=["webkit","moz","o","ms"];window.requestAnimFrame=window.requestAnimationFrame,window.cancelAnimFrame=window.cancelAnimationFrame;for(var c=0;c<b.length&&!window.requestAnimFrame;++c)window.requestAnimFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimFrame||(window.requestAnimFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimFrame||(window.cancelAnimFrame=function(a){clearTimeout(a)})}d()},{}],10:[function(a,b,c){"use strict";function d(){var a=["webkit","moz","o","ms"];window.requestFullScreen||(window.requestFullScreen=b,c());function b(b){b.requestFullScreen=b.requestFullScreen;for(var c=0;c<a.length&&!b.requestFullScreen;++c)b.requestFullScreen=b[a[c]+"RequestFullScreen"];arguments.length<=1?b.requestFullScreen.call(b):b.requestFullScreen.apply(b,arguments.slice(1))}function c(){document.cancelFullScreen=document.exitFullscreen||document.webkitExitFullscreen;for(var b=0;b<a.length&&!document.cancelFullScreen;++b)document.cancelFullScreen=document[a[b]+"CancelFullScreen"]}}d()},{}],11:[function(a,b,c){"use strict";var d=a("../util/browser"),e=a("../html"),f=e.dom,g="support-",h={className:{container:"support",message:g+"message"}};function i(){return d.versions.ios&&(d.versions.weixin||d.versions.vendor.indexOf("Google")>-1)||d.versions.windows}function j(a){a=a||{};var b=a.namespace,c=a.container,d=void 0!==a.message?a.message:"Your browser does not support the player. please use iphone weichat browser!",e=f.createElement({className:b+h.className.container}),g=f.createElement({className:b+h.className.message});g.innerHTML=d,e.appendChild(g),c.appendChild(e)}b.exports={isSupport:i,createMessage:j}},{"../html":2,"../util/browser":12}],12:[function(a,b,c){"use strict";var d=window.navigator,e={versions:function(){var a=d.userAgent,b=d.appVersion,c=d.vendor;return{u:a,app:b,vendor:c,windows:a.indexOf("Windows")>-1,trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&-1===a.indexOf("KHTML"),chrome:a.indexOf("Chrome")>-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:-1===a.indexOf("Safari"),weixin:a.indexOf("MicroMessenger")>-1,weibo:a.indexOf("Weibo")>-1,qq:" qq"===a.match(/\sQQ/i)}}(),language:(d.browserLanguage||d.language).toLowerCase()};b.exports=e},{}],13:[function(a,b,c){"use strict";var d=function(){return{date:a(),duration:b(),dateDiff:e,dateDiffResult:f,dateDiffResultFull:g,dateToStr:k,datetimeToStr:j,getOffsetDate:h,paramToDate:r,strToDate:q,timeToStr:l,durationToStr:m,durationToObj:n,typeToStr:t,weekdayToStr:s,zhDateToStr:o,zhDatetimeToStr:p,fillZero:i};function a(){return{monthFirstDay:a,monthLastDay:b};function a(a){return r(a.getFullYear(),a.getMonth())}function b(b){var c=a(b);return c=h("month",c,1),c=h("date",c,-1)}}function b(){return{today:a,yestoday:b,date:d,currentWeek:e,lastWeek:f,currentMonth:g,currentYear:i,calendarMonth:j,month:k,year:l};function a(){return c("date",new Date)}function b(){return c("date",h("date",new Date,-1))}function d(a){return c("date",a)}function e(){return c("day",new Date)}function f(){return c("day",h("date",new Date,-7))}function g(){return c("month",new Date)}function i(){return c("year",new Date)}function j(a,b){var d=new Date;return a=a||d.getFullYear(),b=b||d.getMonth()+1,c("calendarMonth",r(a,b-1))}function k(a,b){var d=new Date;return a=a||d.getFullYear(),b=b||d.getMonth()+1,c("month",r(a,b-1))}function l(a){return c("year",r(a))}}function c(a,b){var c=d(a,b);return{startTime:j(c.startTime),endTime:j(c.endTime)}}function d(a,b){var c,d,e,f,g,i,j,k,l;switch(a){case"calendarMonth":c=b.getFullYear(),d=b.getMonth(),k=r(c,d,e,f,g,i),l=h("month",k,1);var m=k.getDay(),n=l.getDay();k=h("date",k,-m%7),l=h("date",l,(7-n)%7);break;case"year":c=b.getFullYear(),k=r(c,d,e,f,g,i),l=h(a,k,1);break;case"month":c=b.getFullYear(),d=b.getMonth(),k=r(c,d,e,f,g,i),l=h(a,k,1);break;case"date":c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),k=r(c,d,e,f,g,i),l=h(a,k,1);break;case"day":c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),j=b.getDay(),e-=(j+6)%7,k=r(c,d,e,f,g,i),l=h("date",k,7)}return{startTime:k,endTime:l}}function e(a,b,c){var d=0;switch(a){case"year":d=Math.floor((12*(b.getFullYear()-c.getFullYear())+b.getMonth()-c.getMonth())/12);break;case"month":d=12*(b.getFullYear()-c.getFullYear())+b.getMonth()-c.getMonth()+((b.getDate()-c.getDate()>=0?1:-1)+(b>=c?-1:1))/2;break;case"date":d=Math.floor(b.getTime()/864e5)-Math.floor(c.getTime()/864e5);break;case"hour":d=Math.floor(b.getTime()/36e5)-Math.floor(c.getTime()/36e5);break;case"minute":d=Math.floor(b.getTime()/6e4)-Math.floor(c.getTime()/6e4);break;case"second":d=Math.floor(b.getTime()/1e3)-Math.floor(c.getTime()/1e3);break;default:d=b.getTime()-c.getTime()}return d}function f(a,b){var c,d;return d="year",c=e(d,a,b),0!==c?{offset:c,type:d}:(d="month",c=e(d,a,b),0!==c?{offset:c,type:d}:(d="date",c=e(d,a,b),0!==c?{offset:c,type:d}:(d="hour",c=e(d,a,b),0!==c?{offset:c,type:d}:(d="minute",c=e(d,a,b),0!==c?{offset:c,type:d}:(d="second",c=e(d,a,b),{offset:c,type:d})))))}function g(a,b,c){var d={},f=b.getTime()-c.getTime(),g=f;switch(a){case"year":d.year=e("year",b,c);break;case"date":d.date=Math.floor(g/864e5),g%=864e5,d.hour=Math.floor(g/36e5),g%=36e5,d.minute=Math.floor(g/6e4),g%=6e4,d.second=Math.floor(g/1e3),g%=1e3}return d}function h(a,b,c){var d=b.getFullYear(),e=b.getMonth(),f=b.getDate(),g=b.getHours(),h=b.getMinutes(),i=b.getSeconds();switch(a){case"year":d+=c;break;case"month":e+=c;break;case"date":f+=c;break;case"hour":g+=c;break;case"minute":h+=c;break;case"second":i+=c}return r(d,e,f,g,h,i)}function i(a,b){for(var c=""+a,d=0;d<b-c.length;d++)c="0"+c;return c}function j(a,b){"string"==typeof a&&(a=q(a)),b=b||"yyyy-MM-dd hh:mm:ss";var c=a.getFullYear(),d=i(a.getMonth()+1,2),e=i(a.getDate(),2),f=i(a.getHours(),2),g=i(a.getMinutes(),2),h=i(a.getSeconds(),2);return b.replace("yyyy",c).replace("MM",d).replace("dd",e).replace("hh",f).replace("mm",g).replace("ss",h)}function k(a,b){"string"==typeof a&&(a=q(a)),b=b||"yyyy-MM-dd";var c=a.getFullYear(),d=i(a.getMonth()+1,2),e=i(a.getDate(),2);return b.replace("yyyy",c).replace("MM",d).replace("dd",e)}function l(a,b){"string"==typeof a&&(a=q(a)),b=b||"hh:mm:ss";var c=i(a.getHours(),2),d=i(a.getMinutes(),2),e=i(a.getSeconds(),2);return b.replace("hh",c).replace("mm",d).replace("ss",e)}function m(a,b,c){b=b||"hh:mm:ss.ms",c=c||"hh";var d=n(a),e=i(d.hour,2),f=i(d.minute,2),g=i(d.second,2);return("hh"===c||"mm"===c&&0===d.hour)&&(b=b.replace("hh:",""),"mm"===c&&0===d.minute&&(b=b.replace("mm:",""))),b.replace("hh",e).replace("mm",f).replace("ss",g).replace("ms",d.millisecond)}function n(a){var b={},c=a;return b.hour=Math.floor(c/36e5),c%=36e5,b.minute=Math.floor(c/6e4),c%=6e4,b.second=Math.floor(c/1e3),c%=1e3,b.millisecond=c,b}function o(a,b){"string"==typeof a&&(a=q(a)),b=b||"yyyyMMdd";var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate();return b.replace("yyyy",c+"年").replace("MM",d+"月").replace("dd",e+"日")}function p(a){var b=new Date,c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=i(a.getHours(),2),g=i(a.getMinutes(),2),h="";return b.getFullYear()===c&&b.getMonth()+1===d&&(b.getDate()-e===0||(h+=b.getDate()-e===1?"昨天":b.getDate()-e===2?"前天":o(a)),b.getDate()-e!==0&&(h+=" ")),h+=f+":"+g}function q(a){if(!a)return null;var b=new Date(0),c=a.split(" "),d=c[0],e=d.split("-");if(b.setFullYear(parseInt(e[0])),b.setMonth(parseInt(e[1])-1),b.setDate(parseInt(e[2])),c.length>1){var f=c[1],g=f.split(":");b.setHours(parseInt(g[0])),b.setMinutes(parseInt(g[1])),b.setSeconds(parseInt(g[2]))}return b}function r(a,b,c,d,e,f){b=b||0,c=void 0!==c?c:1,d=d||0,e=e||0,f=f||0;var g=new Date(0);return g.setFullYear(a),g.setMonth(b),g.setDate(c),g.setHours(d),g.setMinutes(e),g.setSeconds(f),g}function s(a){var b="";switch(a){case 0:b="日";break;case 1:b="一";break;case 2:b="二";break;case 3:b="三";break;case 4:b="四";break;case 5:b="五";break;case 6:b="六"}return b}function t(a){var b="";switch(a){case"year":b="年";break;case"month":b="月";break;case"day":case"date":b="天";break;case"hour":b="小时";break;case"minute":b="分钟";break;case"second":b="秒"}return b}};b.exports=d()},{}],14:[function(a,b,c){"use strict";b.exports={namespace:"video3d-"}},{}]},{},[5,14]);
//# sourceMappingURL=video3d.min.map